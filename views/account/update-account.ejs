<main>

  <!-- Content Heading -->
  <% if (title) { %>
    <h1><%= title %></h1>
  <% } else { %>
    <% res.redirect("/") %>
  <% } %>

  <!-- Message Block -->
  <%- messages() %>

  <!-- Validation Errors -->
  <% if (errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <div class="container">
    <div class="registration-container">

      <!-- UPDATE ACCOUNT INFORMATION -->
      <form
        id="updateRegistrationForm"
        class="form-container"
        action="/account/update-user-info"
        method="post"
      >
        <fieldset>
          <legend>Update Account Information</legend>

          <div class="input">
            <label for="account_firstname">
              First Name<span class="required">*</span>
            </label>
            <input
              type="text"
              id="account_firstname"
              name="account_firstname"
              required
              value="<%= account_firstname || account.account_firstname || accountData?.account_firstname || '' %>"
            >
          </div>

          <div class="input">
            <label for="account_lastname">
              Last Name<span class="required">*</span>
            </label>
            <input
              type="text"
              id="account_lastname"
              name="account_lastname"
              required
              value="<%= account_lastname || account.account_lastname || accountData?.account_lastname || '' %>"
            >
          </div>

          <div class="input">
            <label for="account_email">
              Email<span class="required">*</span>
            </label>
            <input
              type="email"
              id="account_email"
              name="account_email"
              required
              value="<%= account_email || account.account_email || accountData?.account_email || '' %>"
              pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
              title="Enter a valid email address (e.g., user@example.com)"
            >
          </div>

          <input
            type="hidden"
            name="account_id"
            value="<%= account_id || account.account_id || accountData?.account_id || '' %>"
          >

          <div class="submit-button">
            <button type="submit" disabled>Update Account Information</button>
          </div>
        </fieldset>
      </form>

      <hr>

      <!-- UPDATE PASSWORD -->
      <form
        id="updatePasswordForm"
        class="form-container"
        action="/account/update-user-password"
        method="post"
      >
        <fieldset>
          <legend>Update Account Password</legend>

          <p>
            Password must be at least 12 characters and include
            one uppercase letter, one number, and one special character.
          </p>

          <div class="input">
            <label for="account_password">New Password</label>
            <input
              type="password"
              id="account_password"
              name="account_password"
              required
              pattern="(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{12,}"
              title="Password must be at least 12 characters long and include one uppercase letter, one number, and one special character."
            >

            <ul>
              <li>At least 12 characters</li>
              <li>One uppercase letter</li>
              <li>One number</li>
              <li>One special character</li>
            </ul>

            <span id="passWordBtn">Show Password</span>
          </div>

          <input
            type="hidden"
            name="account_id"
            value="<%= account_id || account.account_id || accountData?.account_id || '' %>"
          >

          <div class="submit-button">
            <button type="submit">Change Password</button>
          </div>
        </fieldset>
      </form>

    </div>
  </div>

</main>

<script src="/js/account-update.js"></script>